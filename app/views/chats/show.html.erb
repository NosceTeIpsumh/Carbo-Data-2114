<% content_for :navabr_text_label, "Back" %>
<% content_for :navbar_text_path, chats_path %>

<%# Subscribe to Turbo Stream channel for real-time updates %>
<%= turbo_stream_from "chat_#{@chat.id}" %>

<div class="container">
  <div class="card shadow-sm rounded-5 my-4 p-4">
    <h1 class="display-3 text-center mt-4 mb-5">ğŸ¦¸â€â™‚ï¸SuperCarboğŸ¦¸â€â™€ï¸</h1>

    <h2 id="chat_title" class="display-6 mb-4"><%= @chat.title %></h2>

    <div id="messages">
      <% @chat.messages.each do |message| %>
        <%= render "messages/message", message: message, chat: @chat %>
      <% end %>
    </div>
    <div id="new_message_container">
      <%= simple_form_for [@chat, @message] do |f| %>
        <%= f.input :content, label: false, required: true, placeholder: "How can I help you?", innerHTML: { class: "muted-text"} %>
        <%= f.button :submit, 'Ask LLM', class: 'btn btn-success mb-2 rounded-5' %>
      <% end %>
    </div>
  </div>
</div>
